{"name":"Emergenzeprato","tagline":"Gestore fonti del progetto @emergenzeprato . Data management system to manage meteo and emergency information with social media","body":"Il sistema EmergenzePrato nasce con l’intento di fornire tramite un unico canale di segnalazioni relative al maltempo a Prato e provincia mischiando informazioni di fonti ufficiali con segnalazioni civiche.\r\n\r\nEmergenzePrato è un canale che puoi seguire su Twitter iscrivendoti al social network gratuitamente.\r\n\r\nInoltre il servizio comunica:\r\n\r\nLe previsioni [Lamma](http://www.lamma.rete.toscana.it/previ/ita/xml/comuni_web/dati/prato.xml) del giorno e le previsioni del giorno dopo relative a Prato (grazie [OpenToscana](http://open.toscana.it/))\r\nIl [Biometeo](http://www.biometeo.it/) relativo a Prato\r\nLe situazioni di rischio relative a Prato provenienti dal [Centro Funzionale Servizio Idrogeologico Toscana](http://www.cfr.toscana.it/) (grazie [Luca Bonuccelli](https://twitter.com/lucabonuc))\r\nEventuali Aggiornamenti della [pagina web emergenze](http://www.protezionecivile.comune.prato.it/emergenze/) della Protezione Civile di Prato\r\nLe temperature rilevate tramite [questo servizio](http://www.wunderground.com/weather/api/) (grazie [Alfonso Crisci](https://twitter.com/alf_crisci))\r\nLe foto Instagram taggate con #pratopioggia\r\nI post inviati tramite [il gruppo Facebook](https://www.facebook.com/groups/1546332912286384/) #emergenzeprato\r\nI tweet indirizzati a @emergenzeprato\r\nI tweet contenenti uno dei seguenti tag:\r\n* #pratoterremoto per segnalazioni relative a terremoto\r\n* #pratoneve per segnalazioni relative a neve a Prato\r\n* #pratopioggia per segnalazioni relative a pioggia a Prato\r\n* #cantagalloneve per segnalazioni relative a neve a Cantagallo\r\n* #vaianoneve per segnalazioni relative a neve a Vaiano\r\n* #vernioneve per segnalazioni relative a neve a Vernio\r\n* #pratovento per le segnalazioni relative a vento a Prato\r\n\r\nI dati vengono inviati anche su **Telegram** se si inviano i comandi predefiniti all’utente @emergenzeprato_bot .\r\n\r\nPer chi volesse implementare un servizio simile può fare riferimento a [questo post](http://pratosmart.teo-soft.com/fatti-un-pratopioggia-tutto-tuo-e-chiamalo-hopratopioggiaancheio/) come linea guida.\r\n\r\n# Emergenzeprato data manager\r\n---------\r\nTWITTER\r\n\r\nGli script per inviare i tweet vanno eseguiti con la periodicità con cui si vuole tuittare le informazioni, è possibile creare secondo lo stesso approccio tanti script quanti se ne vogliono.\r\n\r\nSi preleva i dati delle fonti Lamma, Biometeo e CFR Toscana e si tuittano i dati su @emergenzeprato\r\n\r\nL'account @emergenzeprato rituitta tutti i tweet con tag ben precisi e le foto Instagram #pratopioggia\r\n\r\nInoltre tutti i tweet taggati con un ht definito e geolocalizzazione vengono mappati su pratosmart.org\r\n\r\n----------\r\nTELEGRAM\r\n\r\nAggiunto anche Telegram bot (sviluppato da https://github.com/Eleirbag89/TelegramBotPHP). \r\n- Creare un bot su Telegram \r\n- definire i comandi da inviare e gestire con getUpdates.php\r\n- definire come prelevare i dati con getdata.php\r\n- Creare un Cron Job per eseguire getUpadates.php ad intervalli di tempo regolari (per emergenzeprato è eseguito ogni minuto).\r\n\r\nNel caso si voglia gestire emergenzepratbot con un webhook su un server allora utilizzare update.php\r\n\r\nPer usare Emergenzeprato su Telegram:\r\n- aggiungere  @emergenzeprato_bot su Telegram\r\n- inviare a emergenzeprato i comandi per ricevere gli aggiornamenti come indicato qui http://pratosmart.teo-soft.com/emergenzeprato-cresce-telegram-per-sapere-il-meteo-a-prato/\r\n\r\n--------\r\nGESTIONE DEI JOB\r\nUn esempio di come va strutturata la tabella dei CRON per schedulare i task. Occorre schedulare i cron sulla base delle esigenze. il file storage.php aggiorna (ogni ora) i dati dai rispettivi siti alla cartella data da cui poi i BOT li prelevano. \r\n\r\n(* * * * * php /home/pi/emergenzeprato/TelegramBot/getUpdates.php)\r\n\r\n(00  00-16 * * * cd /home/pi/emergenzeprato && php storage.php)\r\n\r\n(00 09,10 * * * cd /home/pi/emergenzeprato/TwitterBot && php tweet_meteo.php \"oggi\") \r\n\r\n(00 07,12,16,00 * * * cd /home/pi/emergenzeprato/TwitterBot && php tweet_temperature.php)\r\n\r\netc...\r\n\r\n---------\r\nSOCIAL NETWORK\r\n\r\nSe si vuole integrare con regole sui social network può essere usato IFTTT come usato qui\r\nhttps://ifttt.com/p/pratopioggia/shared\r\n\r\n--------\r\nINFORMAZIONI\r\n\r\nPer info pratosmart.org\r\n\r\nQui la presentazione del progetto\r\nhttp://pratosmart.teo-soft.com/emergenzeprato/\r\n\r\nhttps://docs.google.com/presentation/d/1yeZxMVFpiL8zfhG52U2zi8MRjWqDWiptkiPIeef9ntg/pub?start=false&loop=false&delayms=3000 (CC-BY-SA)\r\n","google":"UA-47062888-1","note":"Don't delete this file! It's used internally to help with page regeneration."}